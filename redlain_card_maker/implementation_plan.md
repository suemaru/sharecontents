# レッドランカードメーカー実装計画

## フェーズ1: 基本構造の構築（3日間）

### 目標
- Three.jsを使用した基本的なシーンを構築
- 背景と前景の2つのレイヤーを実装
- 基本的なHTMLとCSSのレイアウトを作成

### タスク
- [x] プロジェクトディレクトリ構造を作成
- [x] 必要なライブラリをインポート（Three.js）
- [x] HTMLファイルの基本構造を実装
- [x] CSSでのスタイリング（基本レイアウト）
- [x] Three.jsシーンのセットアップ
- [x] カメラとレンダラーの設定
- [x] 背景レイヤーの実装（PlaneGeometry）
- [x] 前景レイヤーの実装（PlaneGeometry）
- [x] レスポンシブデザインの基本対応

## フェーズ2: 視差効果の実装（2日間）

### 目標
- デバイスの傾きを検出して視差効果を実装
- PC環境での代替操作を実装

### タスク
- [x] DeviceOrientationEventの検出コードを実装
- [x] iOS Safariでの許可ダイアログ対応
- [x] 傾きデータに基づいたレイヤー移動のアルゴリズム実装
- [x] PC環境でのマウス移動による代替操作の実装
- [x] 視差効果の動きを調整（感度、移動範囲）
- [x] 動作テストと視覚調整

## フェーズ3: エフェクト実装（4日間）

### 目標
- 5種類のビジュアルエフェクトを実装
- エフェクト切り替えシステムを構築

### タスク
- [x] エフェクト管理用のクラス/モジュール作成
- [x] fire（炎）エフェクトの実装
  - [x] パーティクルシステムの設定
  - [x] テクスチャとシェーダーの設定
  - [x] 上昇アニメーションの実装
- [x] sparkle（キラキラ）エフェクトの実装
  - [x] 放射状パーティクルの生成
  - [x] サイズ/色/透明度のランダム変化
- [x] lightning（雷）エフェクトの実装
  - [x] ジグザグラインジオメトリの生成
  - [x] フラッシュ効果のタイミング設定
- [x] glow（光）エフェクトの実装
  - [x] スポットライトシェーダーの実装
  - [x] マスク処理による前景強調
- [x] none（エフェクトなし）の状態設定
- [x] エフェクト切り替えシステムのテスト

## フェーズ4: UIとインタラクションの実装（2日間）

### 目標
- タップ操作によるテキスト情報表示の実装
- カード情報のローディングシステムを実装

### タスク
- [x] タイトル表示のHTMLとCSSを実装
- [x] 詳細情報オーバーレイのHTMLとCSSを実装
- [x] タップイベントの検出と処理
- [x] カード情報のJSONデータ構造の定義
- [x] JSONから情報を読み込むローダーの実装
- [x] テキスト情報のアニメーション効果（フェードイン/アウト）
- [x] UIの位置調整とレスポンシブ対応

## フェーズ5: 最適化とテスト（2日間）

### 目標
- パフォーマンスの最適化
- 各種デバイスでのテストと調整

### タスク
- [x] テクスチャの最適化（サイズ、圧縮）
- [x] パーティクル数の調整
- [x] アニメーションフレームレートの最適化
- [x] iOS Safariでのテストと調整
- [x] Android Chromeでのテストと調整
- [x] PCブラウザでのテストと調整
- [x] パフォーマンスボトルネックの特定と解決
- [x] エラーハンドリングの追加

## フェーズ6: ドキュメント作成と最終調整（1日間）

### 目標
- ドキュメント作成と仕上げ
- デモ用の準備

### タスク
- [x] コードコメントの追加と整理
- [x] READMEの更新
- [x] 使用方法と実装メモの作成
- [x] サンプルカードデータの追加
- [x] GitHubへのアップロード準備
- [x] デモ用URL作成とテスト

## スケジュール概要

**合計期間: 2週間（14日間）**

| フェーズ | 内容 | 期間 | 
|--------|------|------|
| 1 | 基本構造の構築 | 3日間 |
| 2 | 視差効果の実装 | 2日間 |
| 3 | エフェクト実装 | 4日間 |
| 4 | UIとインタラクション | 2日間 |
| 5 | 最適化とテスト | 2日間 |
| 6 | ドキュメント作成と最終調整 | 1日間 |

## 技術的リスクと対策

1. **iOS Safariのセンサー許可問題**
   - 対策: ユーザーフレンドリーな許可リクエストUIを実装し、許可なしの場合の代替UIも用意

2. **モバイルデバイスでのパフォーマンス問題**
   - 対策: エフェクトの軽量化、パーティクル数の制限、テクスチャサイズの最適化

3. **レスポンシブ対応の複雑さ**
   - 対策: スマートフォン優先のデザインから始め、徐々に大画面対応を追加

4. **異なるブラウザでの挙動の違い**
   - 対策: クロスブラウザテストを徹底し、ブラウザ固有の問題に対処するためのポリフィルを使用 

## 実装完了レポート

**全てのタスクが完了しました**

- カード表示エンジンの基本機能が実装されました
- URL先のカードデータをJSONから読み込み、3Dビジュアライゼーションを表示します
- 4つのエフェクト（炎、キラキラ、稲妻、光）が実装され、各カードタイプに適用されます
- ブラウザのテストでは正常に動作し、サーバーログからURLによるカード切り替え機能が動作しています
- デモURLテスト完了（`index.html?card=カード名`が正常に動作） 